sa(E):-
	number(E).
sa(+(E)):-
	sa(E).
sa(-(E)):-
	sa(E).
sa(E1+E2):-
	sa(E1),
	sa(E2).
sa(E1-E2):-
	sa(E1),
	sa(E2).
sa(E1*E2):-
	sa(E1),
	sa(E2).
sa(E1/E2):-
	sa(E1),
	sa(E2),
	E2\=0.
sa(E1^E2):-
	sa(E1),
	sa(E2).

w(E,_):-
	number(E),!.
w(X,X):-!.
w(W1+W2,X):-
	!,
	w(W1,X),
	w(W2,X).
w(W1-W2,X):-
	!,
	w(W1,X),
	w(W2,X).
w(W1*W2,X):-
	!,
	w(W1,X),
	w(W2,X).
w(W/N,X):-
	!,
	w(W,X),
	number(N),
	N\=0.
w(W^N,X):-
	w(W,X),
	integer(N),
	N>=0.

a([0|T]):-
	a1(T).
a1([1,1|T]):-
	a1(T).
a1([1,0|T]):-
	a1(T).
a1([0,0|T]):-
	a2(T).
a2([1,0|T]):-
	a3(T).
a2([0,0,1|T]):-
	a3(T).
a3([1,0|T]):-
	a3(T).
a3([0,0,1|T]):-
	a3(T).
a3([1,1]).

b([0,0|T]):-
	b(T).
b([1,0,1|T]):-
	b(T).
b([0|T]):-
	b1(T).
b1([1,1|T]):-
	b2(T).
b1([0,1,0|T]):-
	b2(T).
b2([1,1|T]):-
	b2(T).
b2([0,1,0|T]):-
	b2(T).
b2([0,0,0|T]):-
	b3(T).
b3([1|T]):-
	b4(T).
b4([1|T]):-
	b4(T).
b4([]).




